<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Beispiel Funde Setup — DatArchi</title>
  <link rel="stylesheet" href="css/styles.css">
</head>
<body>

  <main class="main" style="max-width: 600px; margin: 50px auto; text-align: center; padding: 20px;">
    <h1>Beispiel Funde Setup</h1>
    <p class="lead">Dieses Skript fügt Ihrem Browser einige Beispielfunde hinzu, damit Sie die Website und die neue Statistikseite testen können.</p>
    <div id="status" style="margin-top: 20px; font-weight: bold;">Wird eingerichtet...</div>
    <a id="goToStats" href="pages/funde/statistics.html" class="btn btn-primary btn-lg" style="margin-top: 20px; display: none;">Zur Statistikseite</a>
  </main>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const FINDS_STORAGE_KEY = 'datarchi.funde.v1';
      let savedFinds = JSON.parse(localStorage.getItem(FINDS_STORAGE_KEY)) || [];

      const exampleFinds = [
        {
          id: `fund-${Date.now()}-1`,
          titel: "Keramikscherbe (Römerzeit)",
          beschreibung: "Fragment einer römischen Terra Sigillata Schale, rot glänzend, mit Stempelresten. Gefunden in Schicht 10.",
          material: "Keramik",
          datierung: "1. - 2. Jh. n. Chr.",
          funddatum: "2024-05-10",
          latitude: 100.5123,
          longitude: 200.7456,
          photoDataUrl: "",
          zoneLabel: "Zone 1-2"
        },
        {
          id: `fund-${Date.now()}-2`,
          titel: "Bronzefibel (Keltenzeit)",
          beschreibung: "Gut erhaltene Bronzefibel, möglicherweise vom Typ Aucissa. Leichte Korrosionsspuren.",
          material: "Bronze",
          datierung: "1. Jh. v. Chr.",
          funddatum: "2024-05-12",
          latitude: 105.1234,
          longitude: 202.8765,
          photoDataUrl: "",
          zoneLabel: "Zone 1-2"
        },
        {
          id: `fund-${Date.now()}-3`,
          titel: "Feuersteinabschlag (Jungsteinzeit)",
          beschreibung: "Unretouchierter Feuersteinabschlag, braun-graues Material. Keine Gebrauchsspuren erkennbar.",
          material: "Feuerstein",
          datierung: "4000 - 3000 v. Chr.",
          funddatum: "2024-05-11",
          latitude: 98.7654,
          longitude: 199.3210,
          photoDataUrl: "",
          zoneLabel: "Zone 2-1"
        },
        {
          id: `fund-${Date.now()}-4`,
          titel: "Knochennadel (Mittelalter)",
          beschreibung: "Spitze Nadel aus Tierknochen, fein poliert. Eventuell zum Nähen oder als Fibel verwendet.",
          material: "Knochen",
          datierung: "12. - 14. Jh. n. Chr.",
          funddatum: "2024-05-15",
          latitude: 103.4567,
          longitude: 201.2345,
          photoDataUrl: "",
          zoneLabel: "Zone 1-1"
        },
        {
          id: `fund-${Date.now()}-5`,
          titel: "Glasscherbe (Neuzeit)",
          beschreibung: "Fragment eines modernen Glasgefäßes, grünlich schimmernd. Wahrscheinlich aus dem 18. Jahrhundert.",
          material: "Glas",
          datierung: "18. Jh. n. Chr.",
          funddatum: "2024-05-16",
          latitude: 101.9876,
          longitude: 203.5432,
          photoDataUrl: "",
          zoneLabel: "Zone 2-2"
        },
      ];

      // Filter out existing example finds if present, to avoid duplicates on re-run
      const newFindsOnly = exampleFinds.filter(exFind => 
        !savedFinds.some(sFind => sFind.titel === exFind.titel && sFind.datierung === exFind.datierung)
      );

      savedFinds = [...savedFinds, ...newFindsOnly];
      localStorage.setItem(FINDS_STORAGE_KEY, JSON.stringify(savedFinds));

      const statusElement = document.getElementById('status');
      const goToStatsButton = document.getElementById('goToStats');
      
      if (newFindsOnly.length > 0) {
        statusElement.textContent = `${newFindsOnly.length} Beispielfunde hinzugefügt!`;
      } else {
        statusElement.textContent = `Beispielfunde sind bereits vorhanden.`;
      }
      goToStatsButton.style.display = 'inline-block';
    });
  </script>
</body>
</html>